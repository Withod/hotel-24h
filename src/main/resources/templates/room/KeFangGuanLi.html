<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>客房管理页面</title>
    <link
      rel="stylesheet"
      href="http://localhost:8080/style/bootstrap.min.css"
    />
    <link rel="stylesheet" href="http://localhost:8080/style/style.css" />
    <script src="http://localhost:8080/js/jquery-3.3.1.min.js"></script>
    <script src="http://localhost:8080/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
      <p class="title">客房管理系统</p>
      <button
        type="button"
        class="btn btn-primary"
        data-toggle="modal"
        data-target="#newRoomModal"
      >
        新增客房
      </button>

      <table id="roomTable"></table>
    </div>

    <!-- modal  -->
    <div class="modal fade" id="newRoomModal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span>&times;</span>
            </button>
            <h4 class="modal-title">新增客房</h4>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="recipient-name" class="control-label">房号：</label>
                <input type="text" class="form-control" id="roomNoInput" />
              </div>
              <div class="form-group">
                <label for="message-text" class="control-label"
                  >房间类型：</label
                >
                <select class="form-control" id="roomTypeSelect"></select>
              </div>
              <div class="form-group">
                <label for="message-text" class="control-label">定价：</label>
                <input type="text" class="form-control" id="roomNoInput" />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              关闭
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="processNewRoom()"
            >
              添加
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="http://localhost:8080/js/MoTaiKuang.js"></script>

    <script>
      $(document).ready(function () {
        $('#roomTable').bootstrapTable({
          ajax: function (request) {
            $.ajax({
              type: 'GET',
              url: 'http://localhost:8080/room/list',
              contentType: 'application/x-www-form-urlencoded',
              dataType: 'json',
              success: function (res) {
                request.success({
                  row: res.data,
                })
                $('#roomTable').bootstrapTable('load', res.data)
              },
              error: function (error) {
                console.log(error)
              },
            })
          },
          striped: true,
          pageNumber: 1,
          pagination: true,
          sidePagination: 'client',
          pageSize: 10,
          columns: [
            {
              title: '房间号',
              field: 'id',
            },
            {
              title: '房间类型',
              field: 'comment',
            },
            {
              title: '房间价格',
              field: 'price',
            },
            {
              field: '',
              title: '操作',
              width: 150,
              formatter: (id, row, idx) => {
                return `<button class="btn btn-danger" onclick="removeComment(${id})">删除</button>`
              },
            },
          ],
        })
      })
    </script>
  </body>
</html>
